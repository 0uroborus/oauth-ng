<!DOCTYPE html>
<html>
  <head>
    <title>oauth-ng | AngularJS directive for OAuth 2.0</title>
    <link rel="stylesheet" href="public/style.css">
    <link rel="stylesheet" href="public/oauth-buttons.css">
    <link rel="stylesheet" href="public/icons/css/slate.css">
    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Italiana&amp;subset=latin">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1.0, maximum-scale=1.0">
  </head>
  <body>

    <section id="top">
    <div id="menu">
      <a id="toggle" href="#">
        <i class="icon-menu"></i>
      </a>
      <ul>
        <li><a href="#introduction">Introduction</a></li>
        <li><a href="#getting-started">Getting Started</a></li>
        <li><a href="#tutorial">Tutorial</a></li>
        <li><a href="#services">Services</a></li>
        <li><a href="#requests">Requests</a></li>
        <li><a href="#realtime">Realtime Services</a></li>
        <li><a href="#user">Signed in User</a></li>
        <li><a href="#configurations">Configurations</a></li>
        <li><a href="#links">Links</a></li>
      </ul>
    </div>
    <div id="heading">
      <div id="logo">oauth-ng</div>
      <div id="tagline">AngularJS directive for OAuth 2.0</a></div>
    </div>
    </section>

    <section>
    <div class="content">
      <h1 id="introduction">Introduction</h1>
      <p>
      Create AngularJS apps that connects to any OAuth 2.0 server using the client side
      flow (aka <a href="http://tools.ietf.org/html/rfc6749#section-1.3.2">OAuth 2.0 Implicit Grant</a>)
      </p>
    </div>
    </section>


    <section>
    <div class="content">
      <h1 id="getting-started">Getting Started</h1>

      <h2>Installation</h2>

      <p>
      Install oauth-ng using <a href="http://bower.io/">Bower</a>
      </p>

      <pre><code>$ bower install oauth-ng --save</code></pre>

      <h2>Basic Example</h2>

      <p>
      This example shows you how the directive works.
      </p>

      <pre><code><xmp><body ng-app="app">
  <oauth2
    site="<oauth-server-uri>"
    client-id="<client-id>"
    redirect-uri="<redirect-uri>"
    scope="<your-scope>"
    profile="<profile-uri>">
  </oauth2>

  <script>angular.module('app', ['ng-oauth']);</script>
</body></xmp></code></pre>

      <p>
      To fully understand how it works read the <a href="#howto">how to</a> section.
      </p>

    </div>
    </section>


    <section>
    <div class="content">


      <h1 id="howto">How To</h1>
      <p>
      In this section you will learn how to use the directive to authorize an OAuth 2.0 server
      through the creation of a real project (in 10 minutues).
      </p>


      <h2 id="setup">Setup</h2>

      <p>
      To build our app we'll use <a href="http://yeoman.io" target="blank">Yeoman</a>, a collection of tools
      and frameworks that can help developers quickly build web applications.
      </p>

      <ul>
        <li>
        <strong>yo</strong> - perform ripetitive tasks.
        </li>
        <li>
        <strong>grunt</strong> - build, preview and test your project.
        </li>
        <li>
        <strong>bower</strong> - solve the frontend package management.
        </li>
      </ul>


      <h2>Installation</h2>

      <p>
      With a recent version of Node.js installed, install the <code>yo</code> package.
      In this way you have Yo, Grunt and Bower and can run them directly from the command-line.
      </p>

      <pre><code>$ npm install -g yo</code></pre>

      <p>
      With Yeoman you can install additional generators with npm. For this tutorial you need
      to install the AngularJS generator.
      </p>

      <pre><code>$ npm install -g generator-angular</code></pre>


      <h2>Create your AngularJS app</h2>

      <p>
      To begin, go to the terminal, make a new directory and cd into it.
      </p>

      <pre><code>$ mkdir new-project && cd $_</code></pre>

      <p>
      You can now kick-start your AngularJS app.
      </p>

      <pre><code>$ yo angular</code></pre>

      <p>
      It will also ask you if you would like to include Twitter Bootstrap and other stuff.
      Once you've decided, just hit Enter. It will take a while to complete.
      </p>

      <p>
      To preview what the app looks like run the serve command.
      </p>

      <pre><code>$ grunt serve</code></pre>

      <p>
      The server supports LiveReload, meaning you can fire up a text editor, edit a custom
      element and the browser will reload on save.
      </p>


      <h2>Install oauth-ng</h2>

      <p>
      Install oauth-ng using <a href="http://bower.io/">Bower</a>.
      </p>

      <pre><code>$ bower install oauth-ng --save</code></pre>

      <p>
      With this command oauth-ng and all its dependencies are downloaded. To automatically
      add them to your index page stop and restart the server.
      </p>

      <pre><code>$ grunt serve</code></pre>

      <p>
      The setup is now completed.
      </p>


      <h2>AngularJS app definition</h2>

      <p>
      Inject the oauth-ng module into your application and remember its initialization in your
      index page using the <code>ng-app</code> directive.
      </p>

      <pre><code><xmp>// app/scripts/app.js
angular.module('newProjectApp', ['oauth'])</xmp></code></pre>


      <h2 id="server">OAuth 2.0 Server</h2>

      <p>
      To test the directive we created a basic OAuth 2.0 authorization server (using
      <a href="https://github.com/doorkeeper-gem/doorkeeper">Ruby</a>).

      <ul>
        <li><strong>uri</strong> - http://oauth-ng-server.herokuapp.com</li>
      </ul>
      </p>

      <p>
      The source code is available on <a href="#" target="blank">Github</a>.
      </p>


      <h2>Identify your application</h2>

      <p>
      To make the directive work you need a registered application. Here one.
      </p>

      <ul>
        <li><strong>client-id</strong> - 017b9f702a904869a6e52bd39b147bb912.</li>
        <li><strong>redirect-uri</strong> - http://localhost:9000</li>
      </ul>

      <p>
      Use the <code>client-id</code> and the <code>redirect-uri</code> above or
      <a href="" target="blank">register a new one</a>.
      </p>


      <h2>Add the oauth-ng directive</h2>

      <p>
      Open the main.html view and place the oauth directive.
      </p>

      <pre><code><xmp>// apps/views/main.html
<oauth2
  site="http://oauth-ng-server.herokuapp.com"
  client-id="017b9f702a904869a6e52bd39b147bb912"
  redirect-uri="http://localhost:9000"
  profile="http://oauth-ng-server.herokuapp.com/profile">
</oauth2></xmp></code></pre>

      <p>
      Follows a description for the used attributes.
      </p>

      <table class="table table-labeled">
        <tbody class="smaller-titles">
          <tr>
            <td class="parameter">
              <span>site</span>
            </td>
            <td>
              The URI representing the OAuth 2.0 authorization server.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>client-id</span>
            </td>
            <td>
              Registered Client ID.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>redirect-uri</span>
            </td>
            <td>
              Registered application URI. Where the user is redirected after the authorization.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>profile-uri</span>
            </td>
            <td>
              API endpoint returning the authenticated profile resource.
            </td>
          </tr>
        </tbody>
      </table>



      <h2>You're done!</h2>

      <p>
      Nothing else to do. Open your index page, click the <code>Login</code> link,
      authorize your app and get the authenticated user info. You are now ready to
      access to your API in a secure way.
      </p>

      <p>
      #TODO See Demo.
      </p>

      <p>
      #TODO See Github Repository.
      </p>
    </div>
    </section>



    <section>
    <div class="content">
      <h1 id="configurations">Configurations</h1>

      <p>
      The directive accepts the following attributes.
      </p>

      <table class="table">
        <tbody class="smaller-titles">
          <tr>
            <td class="parameter">
              <span>site</span>
              <span class="info">required</span>
            </td>
            <td>
              A string that represents the authorization endpoint.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>client-id</span>
              <span class="info">required</span>
            </td>
            <td>
              Registered Client ID.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>redirect-uri</span>
              <span class="info">required</span>
            </td>
            <td>
              Registered application URI where the user is redirected after the authorization.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>scope</span>
              <span class="info">optional</span>
            </td>
            <td>
              Application privileges.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>profile-uri</span>
              <span class="info">optional</span>
            </td>
            <td>
              API endpoint returning the authenticated profile resource.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>state</span>
              <span class="info">optional</span>
            </td>
            <td>
              Optional opaque value used by the client to maintain state between the request and callback.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>template</span>
              <span class="info">optional</span>
            </td>
            <td>
              Custom template you want to render. <br>
              Default to <code>default.html</code>
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>authorize-path</span>
              <span class="info">optional</span>
            </td>
            <td>
              Authorization URL for the OAuth2 Implicit Flow. <br>
              Default to <code>/oauth/authorize</code>
            </td>
          </tr>
        </tbody>
      </table>

    </div>
    </section>


    <section>
    <div class="content">
      <h1 id="templates">Customizations</h1>

      <p>
        The oauth directive comes to life with customisazion in mind. You can easily define
        personalized CSS styles or create brand new templates.
      </p>

      <h2>Custom CSS</h2>

      <p>
      By default the directive is a simple link. To improve its visual style add some CSS.
      </p>

      <table class="table button">
        <tbody>
          <tr>
            <td class="parameter">
              <span class="title">
                Default
              </span>
            </td>
            <td class="parameter" style="text-align:right;">
              <span>
                 (no extra CSS required)
               </span>
             </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>Logged out</span>
            </td>
            <td>
              <span class="oauth">
                <a href="javascript:void(0)" class="logged-out">Sign In</a> <br>
              </span>
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>Logged in</span>
            </td>
            <td>
              <span class="oauth">
                <a href="javascript:void(0)" class="logged-in">Logout Alice</a>
              </span>
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>Access denied</span>
            </td>
            <td>
              <span class="oauth">
                <a href="javascript:void(0)" class="denied">Access denied. Try again.</a>
              </span>
            </td>
          </tr>
         </tbody>
       </table>

       <table class="table button blue-button">
         <tbody>
           <tr>
             <td class="parameter">
               <span class="title">
                 Blue button style
               </span>
             </td>
             <td class="parameter" style="text-align:right;">
               <span>
                 <a href="https://gist.github.com/andreareginato/06a454d76ad619bb4f9f" target="blank">&lt;Download CSS&gt;</a>
               </span>
             </td>
           </tr>
           <tr>
             <td class="parameter">
               <span>Logged out</span>
             </td>
             <td>
               <span class="oauth">
                 <a href="javascript:void(0)" class="logged-out">Sign In</a>
               </span>
             </td>
           </tr>
           <tr>
             <td class="parameter">
               <span>Logged in</span>
             </td>
             <td>
               <span class="oauth">
                 <a href="javascript:void(0)" class="logged-in">Logout Alice</a> <br>
               </span>
             </td>
           </tr>
           <tr>
             <td class="parameter">
               <span>Access denied</span>
             </td>
             <td>
               <span class="oauth">
                 <a href="javascript:void(0)" class="denied">Access denied. Try again.</a>
               </span>
             </td>
           </tr>
         </tbody>
       </table>

      <p>
      All CSS rules applies to the following HTML structure.
      </p>

      <pre><code><xmp><span class="oauth">
  <a href="#" class="logged-out">Sign In</a>
  <a href="#" class="logged-in">Logout Alice</a>
  <a href="#" class="denied">Access denied. Try again.</a>
</span></xmp></code></pre>

      <p>
      It's easy to create your own. Base all of your rules on the <code>oauth</code> class
      or checkout existing CSS definitions to better understand how it works
      (e.g. the <a href="https://gist.github.com/andreareginato/06a454d76ad619bb4f9f" target="blank">blue button CSS</a>).
      </p>



    </div>
    </section>


    <section>
    <div class="content">
      <h1 id="events">Events</h1>

      <p>
      The events related to the oauth directive are the following.
      </p>

      <table class="table">
        <tbody>
          <tr>
            <td class="parameter">
              <span>oauth:success(token)</span>
              <span class="info">fired</span>
            </td>
            <td>
              Fired when the user has authorized the third party app.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>oauth:logout</span>
              <span class="info">fired</span>
            </td>
            <td>
              Fired when the user logs out.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>oauth:denied</span>
              <span class="info">fired</span>
            </td>
            <td>
              Fired when the user denies the access to the third party app.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>oauth:expired</span>
              <span class="info">fired</span>
            </td>
            <td>
              Fired when the access token is expired.
            </td>
          </tr>
          <tr>
            <td class="parameter">
              <span>oauth:template:update(uri)</span>
              <span class="info">listening</span>
            </td>
            <td>
              Listening for runtime the template change.<br>
              See examples in the <a href="#customization">customization</a> section.
            </td>
          </tr>
        </tbody>
      </table>

      <p>
      Here some examples.
      </p>

      <pre><code><xmp>$scope.$on('oauth:login', function(event, token) {
  console.log('Authorized third party app with token', token.access_token);
});

$scope.$on('oauth:logout', function(event) {
  console.log('The user has signed out');
});

$scope.$on('oauth:denied', function(event) {
  console.log('The user did not authorize the third party app');
});

$scope.$on('oauth:expired', function(event) {
  console.log('The access token is expired. Please refresh the login');
});</xmp></code></pre>


    </div>
    </section>


    <section>
    <div class="content">
      <h1 id="links">Links</h1>

      <ul>
        <li>
        <a href="https://github.com/lelylan/lelylan-ng/" target="blank">Github Repository</a>
        </li>
        <li>
        <a href="https://dev.lelylan.com" target="blank">Lelylan Dev Center</a>
        </li>
        <li>
        <a href="https://lelylan.com" target="blank">Lelylan website</a>
        </li>
        <li>
        <a href="https://twitter.com/lelylan" target="blank">Twitter @lelylan</a>
        </li>
      </ul>
    </div>
    </section>



  </body>
</html>
